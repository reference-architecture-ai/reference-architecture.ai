{%- macro from_section(section) -%}
{%- set section = get_section(path=section) -%}
{%- for post in section.pages -%}
{%- if not post.draft -%}
{"@id": {{ config.base_url ~ "/" ~ post.slug | json_encode | safe }},
{{ config.base_url ~ "/properties/" ~ "title" | json_encode | safe }} : {{ post.title | striptags | json_encode | safe }},
{{ config.base_url ~ "/properties/" ~ "url" | json_encode | safe }} : {{ post.permalink | striptags | json_encode | safe }},
{{ config.base_url ~ "/properties/" ~ "description" | json_encode | safe }} : {{ post.description | json_encode | safe }},
{{ config.base_url ~ "/properties/" ~ "content" | json_encode | safe }} : {{ post.content | striptags | json_encode | safe }},
{{ config.base_url ~ "/properties/" ~ "date" | json_encode | safe }} : {{ post.date | json_encode | safe }},
{{ config.base_url ~ "/properties/" ~ "taxonomies" | json_encode | safe }} : {{ post.taxonomies | json_encode | safe }},
{{ config.base_url ~ "/class/" | json_encode | safe }} : "article"
}{%- if not loop.last -%},{%- endif %}
{%- endif -%}
{%- endfor -%}
{%- if section.subsections -%}
{%- for subsection in section.subsections -%}
{{ self::from_section(section=subsection) }}
{%- if not loop.last -%},{%- endif %}
{%- endfor -%}
{%- endif -%}
{%- endmacro from_section -%}